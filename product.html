<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูุงุตูู ุงูููุชุฌ - ุณูู ูุตุฑ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar">
            <div class="container">
                <a href="index.html" class="logo">๐ ุณูู ูุตุฑ</a>
                <div class="nav-links">
                    <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
                    <a href="index.html#products">ุงูููุชุฌุงุช</a>
                    <a href="contact.html">ุงุชุตู ุจูุง</a>
                    <a href="cart.html" style="position: relative;">
                        ุงูุณูุฉ
                        <span class="cart-badge" id="cartBadge">0</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Product Detail -->
    <div class="product-detail-container" id="product-detail">
        <div class="loading">โณ ุฌุงุฑู ุชุญููู ุชูุงุตูู ุงูููุชุฌ...</div>
    </div>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/201110760081?text=ูุฑุญุจุงูุ ุฃุฑูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุงูููุชุฌุงุช" class="whatsapp-float" target="_blank" rel="noopener">๐ฑ</a>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>๐ ุณูู ูุตุฑ</h3>
                    <p>ูุชุฌุฑู ุงูุฅููุชุฑููู ุงูููุซูู</p>
                </div>
                <div class="footer-section">
                    <h4>ุฑูุงุจุท ุณุฑูุนุฉ</h4>
                    <ul>
                        <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                        <li><a href="index.html#products">ุงูููุชุฌุงุช</a></li>
                        <li><a href="cart.html">ุงูุณูุฉ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ุชูุงุตู ูุนูุง</h4>
                    <ul>
                        <li>๐ฑ ูุงุชุณุงุจ: <a href="https://wa.me/201110760081">01110760081</a></li>
                        <li>๐ง <a href="mailto:info@sooq-masr.com">info@sooq-masr.com</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>ยฉ 2025 ุณูู ูุตุฑ. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
            </div>
        </div>
    </footer>

    <script>
        // ุงูุญุตูู ุนูู ID ุงูููุชุฌ ูู URL
        const urlParams = new URLSearchParams(window.location.search);
        const productId = parseInt(urlParams.get('id'));

        // ุชุญููู ุชูุงุตูู ุงูููุชุฌ
        async function loadProductDetails() {
            try {
                const response = await fetch('products.json');
                const products = await response.json();
                const product = products.find(p => p.id === productId);

                if (!product) {
                    document.getElementById('product-detail').innerHTML = '<div class="error-message"><p>ุงูููุชุฌ ุบูุฑ ููุฌูุฏ</p><a href="index.html" class="btn btn-primary">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</a></div>';
                    return;
                }

                displayProductDetails(product);
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุชุญููู ุงูููุชุฌ:', error);
                document.getElementById('product-detail').innerHTML = '<div class="error-message"><p>ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงูููุชุฌ</p><button onclick="location.reload()" class="btn btn-primary">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button></div>';
            }
        }

        function displayProductDetails(product) {
            const discountPercent = product.sale_price && product.price > product.sale_price
                ? Math.round(((product.price - product.sale_price) / product.price) * 100)
                : 0;

            let reviewsHTML = '';
            if (product.reviews && product.reviews.length > 0) {
                reviewsHTML = '<div class="reviews-section"><h2>ุชููููุงุช ุงูุนููุงุก</h2>';
                product.reviews.slice(0, 10).forEach(review => {
                    reviewsHTML += `
                        <div class="review-card">
                            <div class="review-header">
                                <div>
                                    ${review.verified_purchase ? '<span class="verified-badge">โ ุชู ุงูุชุญูู</span>' : ''}
                                    <span class="reviewer-name">${review.reviewer_name}</span>
                                </div>
                                <span class="review-date">${review.date}</span>
                            </div>
                            <div class="product-rating">
                                ${generateStars(review.rating)}
                            </div>
                            <p>${review.comment}</p>
                        </div>
                    `;
                });
                reviewsHTML += '</div>';
            }

            document.getElementById('product-detail').innerHTML = `
                <div class="product-detail-grid">
                    <div class="product-image-main">
                        ${discountPercent > 0 ? `<div class="discount-badge">-${discountPercent}%</div>` : ''}
                        <img src="${product.image_link}" alt="${product.title}">
                    </div>
                    
                    <div class="product-details">
                        <h1 class="product-detail-title">${product.title}</h1>
                        
                        <div class="product-detail-rating">
                            ${generateStars(product.rating || 0)}
                            <span class="review-count">(${product.review_count || 0} ุชูููู)</span>
                        </div>
                        
                        <div class="product-detail-price">
                            ${product.sale_price && product.sale_price < product.price ? `
                                <span class="sale-price">${product.sale_price} ุฌููู</span>
                                <span class="original-price">${product.price} ุฌููู</span>
                            ` : `
                                <span class="sale-price">${product.price} ุฌููู</span>
                            `}
                        </div>
                        
                        <p class="product-detail-description">${product.description}</p>
                        
                        <div class="shipping-info">
                            <p>๐ ${product.shipping_description || 'ุงูุดุญู ููู ูุตุฑ 100 ุฌููู'}</p>
                            <p>โฑ๏ธ ${product.delivery_time || 'ุงูุชูุตูู ุฎูุงู 3 ุฃูุงู ุนูู'}</p>
                        </div>
                        
                        <button class="btn btn-primary add-to-cart-btn" onclick="addToCart(${product.id})">
                            ๐ ุฅุถุงูุฉ ููุณูุฉ
                        </button>
                        
                        <a href="https://wa.me/201110760081?text=ุฃุฑูุฏ ุทูุจ: ${encodeURIComponent(product.title)}" 
                           class="btn" 
                           style="background: #25D366; color: white; text-align: center; margin-top: 1rem;">
                            ๐ฑ ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ
                        </a>
                    </div>
                </div>
                
                ${reviewsHTML}
            `;
        }

        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            
            let html = '';
            for (let i = 0; i < fullStars; i++) html += '<i class="fas fa-star"></i>';
            if (hasHalfStar) html += '<i class="fas fa-star-half-alt"></i>';
            for (let i = 0; i < emptyStars; i++) html += '<i class="far fa-star"></i>';
            
            return html;
        }

        function addToCart(productId) {
            // ููุฏ ุฅุถุงูุฉ ููุณูุฉ (ุณูุชู ุชุทููุฑู ูุงุญูุงู)
            alert('ุชู ุฅุถุงูุฉ ุงูููุชุฌ ููุณูุฉ ุจูุฌุงุญ! ๐');
        }

        // ุชุญููู ุงูููุชุฌ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        loadProductDetails();
    </script>
</body>
</html>